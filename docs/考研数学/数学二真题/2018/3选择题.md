## 🎯 问题回顾

**题目：**
设函数：
$$
f(x) = \begin{cases}
-1, & x < 0 \\
1, & x \ge 0
\end{cases}
$$
$$
g(x) = \begin{cases}
2 - ax, & x \le -1 \\
x, & -1 < x < 0 \\
x - b, & x \ge 0
\end{cases}
$$
若函数 $h(x) = f(x) + g(x)$ 在 $\mathbb{R}$ 上连续，求 $a$ 和 $b$ 的值。

**选项：**
- (A) $a=3, b=1$
- (B) $a=3, b=2$
- (C) $a=-3, b=1$
- (D) $a=-3, b=2$

---

## 第一部分：构建组合函数 $h(x)$

首先，我们需要写出 $h(x) = f(x) + g(x)$ 的解析式。
由于 $f(x)$ 和 $g(x)$ 的分段点不完全相同（$f$ 在 $0$ 分段，$g$ 在 $-1$ 和 $0$ 分段），我们需要取所有分段点的**并集**，即 $x = -1$ 和 $x = 0$。

我们将实数轴 $\mathbb{R}$ 划分为三个区间进行讨论：

### 1.1 区间 I：$x \le -1$
在此区间内：
- $f(x) = -1$ （因为 $x \le -1 < 0$）
- $g(x) = 2 - ax$

所以：
$$
h(x) = (-1) + (2 - ax) = 1 - ax, \quad (x \le -1)
$$

### 1.2 区间 II：$-1 < x < 0$
在此区间内：
- $f(x) = -1$ （因为 $x < 0$）
- $g(x) = x$

所以：
$$
h(x) = (-1) + x = x - 1, \quad (-1 < x < 0)
$$

### 1.3 区间 III：$x \ge 0$
在此区间内：
- $f(x) = 1$ （因为 $x \ge 0$）
- $g(x) = x - b$

所以：
$$
h(x) = 1 + (x - b) = x + 1 - b, \quad (x \ge 0)
$$

### 1.4 组合函数 $h(x)$ 的完整表达式
综上所述，组合函数为：
$$
h(x) = \begin{cases}
1 - ax, & x \le -1 \\
x - 1, & -1 < x < 0 \\
x + 1 - b, & x \ge 0
\end{cases}
$$

---

## 第二部分：连续性分析策略

根据题意，$h(x)$ 在 $\mathbb{R}$ 上连续。这意味着它必须在所有分段点处都连续。
我们需要检查两个关键点（分界点）：
1.  **$x = -1$**
2.  **$x = 0$**

**连续的定义：**
函数 $h(x)$ 在点 $x_0$ 处连续，必须满足：
$$
\lim_{x \to x_0^-} h(x) = \lim_{x \to x_0^+} h(x) = h(x_0)
$$

---

## 第三部分：求解参数 $a$（在 $x = -1$ 处连续）

### 3.1 计算左极限 $\lim_{x \to -1^-} h(x)$
当 $x \to -1^-$（从左侧接近 -1）时，$x < -1$，使用的是第一段表达式 $1 - ax$。

$$
\lim_{x \to -1^-} h(x) = \lim_{x \to -1} (1 - ax)
$$
代入 $x = -1$：
$$
= 1 - a(-1) = 1 + a
$$

### 3.2 计算右极限 $\lim_{x \to -1^+} h(x)$
当 $x \to -1^+$（从右侧接近 -1）时，$x > -1$，使用的是第二段表达式 $x - 1$。

$$
\lim_{x \to -1^+} h(x) = \lim_{x \to -1} (x - 1)
$$
代入 $x = -1$：
$$
= -1 - 1 = -2
$$

### 3.3 利用连续性建立方程
为了使 $h(x)$ 在 $x = -1$ 处连续，左极限必须等于右极限：

$$
\text{左极限} = \text{右极限}
$$
$$
1 + a = -2
$$

### 3.4 解出 $a$
$$
a = -2 - 1
$$
$$
\mathbf{a = -3}
$$

---

## 第四部分：求解参数 $b$（在 $x = 0$ 处连续）

### 4.1 计算左极限 $\lim_{x \to 0^-} h(x)$
当 $x \to 0^-$（从左侧接近 0）时，$x < 0$，使用的是第二段表达式 $x - 1$。

$$
\lim_{x \to 0^-} h(x) = \lim_{x \to 0} (x - 1)
$$
代入 $x = 0$：
$$
= 0 - 1 = -1
$$

### 4.2 计算右极限 $\lim_{x \to 0^+} h(x)$
当 $x \to 0^+$（从右侧接近 0）时，$x > 0$，使用的是第三段表达式 $x + 1 - b$。

$$
\lim_{x \to 0^+} h(x) = \lim_{x \to 0} (x + 1 - b)
$$
代入 $x = 0$：
$$
= 0 + 1 - b = 1 - b
$$

### 4.3 利用连续性建立方程
为了使 $h(x)$ 在 $x = 0$ 处连续，左极限必须等于右极限：

$$
\text{左极限} = \text{右极限}
$$
$$
-1 = 1 - b
$$

### 4.4 解出 $b$
移项整理：
$$
b = 1 - (-1)
$$
$$
b = 1 + 1
$$
$$
\mathbf{b = 2}
$$

---

## 第五部分：验证与最终结论

### 5.1 参数汇总
根据上述计算，我们得出：
- $a = -3$
- $b = 2$

### 5.2 选项核对
查看题目给出的选项：
- (A) $a=3,b=1$
- (B) $a=3,b=2$
- (C) $a=-3,b=1$
- **(D) $a=-3,b=2$** ✅

我们的计算结果与选项 (D) 完全匹配。

---

## ✅ 最终答案：(D)

---

## 📌 关键要点总结

1.  **分段合并是前提**：处理两个分段函数相加（或相乘）的问题时，必须先将数轴按照**所有分界点**切分，分别写出每一段的组合表达式。本题的关键是将区间划分为 $(-\infty, -1]$、$(-1, 0)$ 和 $[0, +\infty)$。
2.  **连续性的充要条件**：函数在分段点连续 $\iff$ 左极限 = 右极限 = 函数值。
3.  **计算细节**：
    - 在 $x = -1$ 处：连续性保证了 $f$ 的常数性质与 $g$ 的线性拼接。
    - 在 $x = 0$ 处：虽然 $f(x)$ 自身在 $x=0$ 不连续（跳跃间断点），但 $g(x)$ 的参数 $b$ 可以调节，使得两者的和 $f+g$ 产生的跳跃相互抵消，从而实现整体连续。这也是此类题目的核心考点——**不连续函数的和可能是连续函数**。

---

**Would you like me to generate a similar practice problem involving limits or differentiability of piecewise functions?**