## 🎯 问题回顾

**填空题**

设二元函数：
$$
z = \arctan[xy + \sin(x+y)]
$$
求该函数在点 $(0, \pi)$ 处的全微分，即求 $dz|_{(0,\pi)} = \_\_\_\_\_\_.$

---

## 第一部分：理论基础与公式回顾

### 1.1 全微分的定义

对于二元函数 $z = f(x, y)$，若其偏导数连续，则全微分 $dz$ 定义为：
$$
dz = \frac{\partial z}{\partial x} dx + \frac{\partial z}{\partial y} dy
$$

### 1.2 解题策略

为了求出 $dz|_{(0,\pi)}$，我们需要分别计算出函数在点 $(0, \pi)$ 处对 $x$ 和对 $y$ 的偏导数值：
1.  计算 $\displaystyle \frac{\partial z}{\partial x}\bigg|_{(0,\pi)}$
2.  计算 $\displaystyle \frac{\partial z}{\partial y}\bigg|_{(0,\pi)}$
3.  代入全微分公式。

---

## 第二部分：计算偏导数

### 2.1 引入中间变量（链式法则）

令中间变量 $u = xy + \sin(x+y)$，则原函数可看作复合函数：
$$
z = \arctan(u)
$$

根据链式法则：
$$
\frac{\partial z}{\partial x} = \frac{d z}{d u} \cdot \frac{\partial u}{\partial x}
$$
$$
\frac{\partial z}{\partial y} = \frac{d z}{d u} \cdot \frac{\partial u}{\partial y}
$$

其中，外层函数的导数为：
$$
\frac{d z}{d u} = \frac{1}{1+u^2}
$$

### 2.2 计算内层函数的偏导数

对于 $u = xy + \sin(x+y)$：

**1. 对 $x$ 求偏导（视 $y$ 为常数）：**
$$
\frac{\partial u}{\partial x} = \frac{\partial}{\partial x}(xy) + \frac{\partial}{\partial x}(\sin(x+y))
$$
$$
= y \cdot 1 + \cos(x+y) \cdot (x+y)'_x
$$
$$
= y + \cos(x+y) \cdot 1
$$
$$
= y + \cos(x+y)
$$

**2. 对 $y$ 求偏导（视 $x$ 为常数）：**
$$
\frac{\partial u}{\partial y} = \frac{\partial}{\partial y}(xy) + \frac{\partial}{\partial y}(\sin(x+y))
$$
$$
= x \cdot 1 + \cos(x+y) \cdot (x+y)'_y
$$
$$
= x + \cos(x+y) \cdot 1
$$
$$
= x + \cos(x+y)
$$

### 2.3 写出完整的偏导数表达式

将上述结果代回链式法则公式：

$$
\frac{\partial z}{\partial x} = \frac{y + \cos(x+y)}{1 + [xy + \sin(x+y)]^2}
$$

$$
\frac{\partial z}{\partial y} = \frac{x + \cos(x+y)}{1 + [xy + \sin(x+y)]^2}
$$

---

## 第三部分：代入数值求值

我们需要在点 $P(0, \pi)$ 处求值，即 $x=0, y=\pi$。

### 3.1 先计算中间变量 $u$ 的值

$$
u|_{(0,\pi)} = 0 \cdot \pi + \sin(0+\pi) = 0 + \sin(\pi) = 0
$$

分母部分（外层导数部分）的值为：
$$
\frac{1}{1+u^2} = \frac{1}{1+0^2} = 1
$$
> 💡 **技巧**：先算中间变量的值可以大大简化后续代入计算，避免书写冗长的式子。

### 3.2 计算 $\frac{\partial z}{\partial x}$ 的值

代入 $x=0, y=\pi$ 到 $y + \cos(x+y)$：
$$
\frac{\partial u}{\partial x}\bigg|_{(0,\pi)} = \pi + \cos(0+\pi) = \pi + \cos(\pi)
$$
因为 $\cos(\pi) = -1$，所以：
$$
\frac{\partial u}{\partial x}\bigg|_{(0,\pi)} = \pi - 1
$$

结合外层导数：
$$
\frac{\partial z}{\partial x}\bigg|_{(0,\pi)} = 1 \cdot (\pi - 1) = \pi - 1
$$

### 3.3 计算 $\frac{\partial z}{\partial y}$ 的值

代入 $x=0, y=\pi$ 到 $x + \cos(x+y)$：
$$
\frac{\partial u}{\partial y}\bigg|_{(0,\pi)} = 0 + \cos(0+\pi) = \cos(\pi)
$$
因为 $\cos(\pi) = -1$，所以：
$$
\frac{\partial u}{\partial y}\bigg|_{(0,\pi)} = -1
$$

结合外层导数：
$$
\frac{\partial z}{\partial y}\bigg|_{(0,\pi)} = 1 \cdot (-1) = -1
$$

---

## 第四部分：写出全微分

将计算出的偏导数值代入全微分公式：

$$
dz|_{(0,\pi)} = \left( \frac{\partial z}{\partial x}\bigg|_{(0,\pi)} \right) dx + \left( \frac{\partial z}{\partial y}\bigg|_{(0,\pi)} \right) dy
$$

$$
dz|_{(0,\pi)} = (\pi - 1)dx + (-1)dy
$$

整理得：
$$
dz|_{(0,\pi)} = (\pi - 1)dx - dy
$$

---

## ✅ 最终答案

$$
(\pi - 1)dx - dy
$$

---

## 📌 关键要点总结

1.  **复合函数求导（链式法则）**：这是解题核心。要清晰分辨“外层函数”是 $\arctan(\cdot)$，“内层函数”是 $xy+\sin(x+y)$。
2.  **特殊角的三角函数值**：必须熟记 $\sin(\pi) = 0$ 和 $\cos(\pi) = -1$，这是计算准确性的基础。
3.  **计算顺序优化**：建议先算出点 $(0, \pi)$ 处的 $u$ 值（这里是 0），这使得分母 $\frac{1}{1+u^2}$ 变为 1，极大地简化了运算，避免了把长式子一直抄写到最后一步。
4.  **全微分格式**：最后结果必须包含 $dx$ 和 $dy$，这是微分的形式要求，不要漏写。