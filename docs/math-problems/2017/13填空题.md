## 🎯 问题回顾

**填空题**：
计算二重积分 $\displaystyle \int_{0}^{1}dy\int_{y}^{1}\frac{\tan x}{x}dx =$ \_\_\_\_\_\_.

---

## 第一部分：积分区域分析与次序交换

### 1.1 识别难点
观察内层积分 $\displaystyle \int \frac{\tan x}{x} dx$，这是一个非初等积分（原函数无法用有限个初等函数表示）。
因此，直接按原次序计算行不通，必须**交换积分次序**。

### 1.2 确定积分区域 $D$
根据原积分 $\int_{0}^{1}dy\int_{y}^{1}\dots dx$，积分区域 $D$ 由以下不等式确定：
$$
0 \le y \le 1, \quad y \le x \le 1
$$
我们可以画出区域草图：
-   $y$ 从 0 到 1；
-   $x$ 从直线 $x=y$（左边界）到直线 $x=1$（右边界）。
-   这围成了一个顶点为 $(0,0), (1,0), (1,1)$ 的三角形区域。

### 1.3 交换积分次序（化为 X-型）
将 $D$ 看作 X-型区域（先积 $y$ 后积 $x$）：
-   $x$ 的变化范围是 $0$ 到 $1$。
-   对于固定的 $x$， $y$ 的变化范围是从 $y=0$（下边界）到 $y=x$（上边界）。

新的不等式组为：
$$
0 \le x \le 1, \quad 0 \le y \le x
$$

于是原积分转化为：
$$
I = \int_{0}^{1} dx \int_{0}^{x} \frac{\tan x}{x} dy
$$

---

## 第二部分：执行计算

### 2.1 计算内层积分（关于 $y$）
被积函数 $\frac{\tan x}{x}$ 不含 $y$，视为常数提取出来：
$$
\int_{0}^{x} \frac{\tan x}{x} dy = \frac{\tan x}{x} \int_{0}^{x} dy = \frac{\tan x}{x} \cdot (x - 0) = \tan x
$$
这一步消去了分母中的 $x$，使得后续积分变得可积。

### 2.2 计算外层积分（关于 $x$）
现在积分变为：
$$
I = \int_{0}^{1} \tan x \, dx
$$
利用公式 $\tan x = \frac{\sin x}{\cos x}$：
$$
\begin{aligned}
\int_{0}^{1} \frac{\sin x}{\cos x} dx &= -\int_{0}^{1} \frac{d(\cos x)}{\cos x} \\
&= \left[ -\ln|\cos x| \right]_{0}^{1} \\
&= -\ln(\cos 1) - (-\ln(\cos 0)) \\
&= -\ln(\cos 1) - 0 \\
&= -\ln(\cos 1)
\end{aligned}
$$

---

## ✅ 最终答案

$$
-\ln(\cos 1)
$$

---

## 📌 关键要点总结

1.  **交换次序的动机**：当二重积分的内层函数（如 $\frac{\sin x}{x}, e^{x^2}, \frac{\tan x}{x}$）无法直接积分时，**交换积分次序**是首选解题策略。
2.  **区域转换**：能够熟练地在 $0 \le y \le 1, y \le x \le 1$ 与 $0 \le x \le 1, 0 \le y \le x$ 之间互换，这是处理三角形区域积分的基本功。
3.  **积分公式**：熟记基本函数的积分，$\int \tan x \, dx = -\ln|\cos x| + C$。