# é¡¹ç›®ä»£ç ä¼˜åŒ–å»ºè®®

## ğŸ“‹ ç›®å½•
1. [ä»£ç è´¨é‡é—®é¢˜](#ä»£ç è´¨é‡é—®é¢˜)
2. [é…ç½®å’Œç»“æ„ä¼˜åŒ–](#é…ç½®å’Œç»“æ„ä¼˜åŒ–)
3. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
4. [å¯ç»´æŠ¤æ€§ä¼˜åŒ–](#å¯ç»´æŠ¤æ€§ä¼˜åŒ–)
5. [ç±»å‹å®‰å…¨ä¼˜åŒ–](#ç±»å‹å®‰å…¨ä¼˜åŒ–)
6. [æ„å»ºå’Œè„šæœ¬ä¼˜åŒ–](#æ„å»ºå’Œè„šæœ¬ä¼˜åŒ–)

---

## ğŸ”´ ä»£ç è´¨é‡é—®é¢˜

### 1. æ–‡ä»¶å‘½åé”™è¯¯ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `docs/os/os.sidebar.ts:55`

**é—®é¢˜**:
```typescript
{ text: 'åŸºæœ¬æ¦‚è¿°', link: '1.åŸºæœ¬æ¦‚è¿°g.md' },  // âŒ æ–‡ä»¶åæ‹¼å†™é”™è¯¯ï¼Œå¤šäº† 'g'
```

**ä¿®å¤å»ºè®®**:
```typescript
{ text: 'åŸºæœ¬æ¦‚è¿°', link: '1.åŸºæœ¬æ¦‚è¿°.md' },  // âœ… ä¿®æ­£æ‹¼å†™
```

**å½±å“**: ä¼šå¯¼è‡´é“¾æ¥å¤±æ•ˆï¼Œç”¨æˆ·æ— æ³•è®¿é—®è¯¥é¡µé¢

---

### 1.1 æ–‡ä»¶ç¼–å·é‡å¤ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `docs/cn/æ•°æ®é“¾è·¯å±‚/`

**é—®é¢˜**:
- å­˜åœ¨ä¸¤ä¸ªä»¥ `7.` å¼€å¤´çš„æ–‡ä»¶ï¼š`7.å¹¿åŸŸç½‘.md` å’Œ `7.é€šä¿¡è®¾å¤‡.md`
- è¿™å¯èƒ½å¯¼è‡´æ–‡ä»¶æ’åºå’Œå¯¼èˆªæ··ä¹±

**ä¿®å¤å»ºè®®**:
- å°† `7.é€šä¿¡è®¾å¤‡.md` é‡å‘½åä¸º `8.é€šä¿¡è®¾å¤‡.md`
- å°†åŸæ¥çš„ `8.æ€»ç»“.md` é‡å‘½åä¸º `9.æ€»ç»“.md`
- æ›´æ–° `cn.sidebar.ts` ä¸­çš„é“¾æ¥å¼•ç”¨

---

### 2. Sidebar é…ç½®ä¸ä¸€è‡´ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: æ‰€æœ‰ `*.sidebar.ts` æ–‡ä»¶

**é—®é¢˜**:
- `ds.sidebar.ts`: æ‰€æœ‰é¡¹éƒ½æ˜¾å¼è®¾ç½® `collapsible: false`
- `cpp.sidebar.ts`: æ²¡æœ‰è®¾ç½® `collapsible` å±æ€§ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
- `os.sidebar.ts`: æ··åˆä½¿ç”¨ `true` å’Œ `false`
- `math.sidebar.ts`: ä½¿ç”¨ `collapsible: true`
- `linear-algebra.sidebar.ts`: ä½¿ç”¨ `collapsible: false`

**ä¿®å¤å»ºè®®**:
1. **ç»Ÿä¸€é…ç½®ç­–ç•¥**: ä¸ºæ‰€æœ‰ sidebar é¡¹ç»Ÿä¸€è®¾ç½® `collapsible` å±æ€§
2. **åˆ›å»ºè¾…åŠ©å‡½æ•°**: å‡å°‘é‡å¤ä»£ç 

```typescript
// åˆ›å»º docs/utils/sidebar-helper.ts
export interface SidebarItem {
  text: string
  prefix: string
  collapsible?: boolean
  children: Array<{ text: string; link: string }>
}

export function createSidebarGroup(
  text: string,
  prefix: string,
  children: Array<{ text: string; link: string }>,
  collapsible: boolean = false
): SidebarItem {
  return { text, prefix, collapsible, children }
}

// ä½¿ç”¨ç¤ºä¾‹
export const dsSidebar = [
  createSidebarGroup('åŸºç¡€å…¥é—¨', 'åŸºç¡€å…¥é—¨', [
    { text: 'åŸºæœ¬æ¦‚å¿µ', link: '1.åŸºæœ¬æ¦‚å¿µ.md' },
    // ...
  ], false),
  // ...
]
```

---

## âš™ï¸ é…ç½®å’Œç»“æ„ä¼˜åŒ–

### 3. TypeScript é…ç½®ä¸å¤Ÿä¸¥æ ¼ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `tsconfig.json`

**é—®é¢˜**:
- åªå¯ç”¨äº† `strictNullChecks`ï¼Œæœªå¯ç”¨å®Œæ•´çš„ `strict` æ¨¡å¼
- ç¼ºå°‘ `noUnusedParameters`ã€`noImplicitReturns` ç­‰æ£€æŸ¥

**ä¿®å¤å»ºè®®**:
```json
{
  "compilerOptions": {
    "strict": true,  // âœ… å¯ç”¨æ‰€æœ‰ä¸¥æ ¼æ£€æŸ¥
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true  // æ›´å®‰å…¨çš„æ•°ç»„/å¯¹è±¡è®¿é—®
  }
}
```

---

### 4. Sidebar é…ç½®ç¼ºå°‘ç±»å‹å®šä¹‰ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: æ‰€æœ‰ `*.sidebar.ts` æ–‡ä»¶

**é—®é¢˜**: ä½¿ç”¨éšå¼ç±»å‹ï¼Œç¼ºå°‘æ˜ç¡®çš„ç±»å‹å®šä¹‰

**ä¿®å¤å»ºè®®**:
```typescript
import type { SidebarConfigArray } from '@142vip/vuepress'

export const dsSidebar: SidebarConfigArray = [
  // ...
]
```

---

### 5. æ ·å¼æ–‡ä»¶ç»„ç»‡ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `docs/.vuepress/styles/`

**é—®é¢˜**:
- `palette.scss` æ–‡ä»¶å‡ ä¹æ˜¯ç©ºçš„
- `config.scss` å†…å®¹å¾ˆå°‘
- é¦–é¡µæ ·å¼å†…è”åœ¨ `README.md` ä¸­ï¼ˆ250+ è¡Œ CSSï¼‰

**ä¿®å¤å»ºè®®**:
1. å°†é¦–é¡µæ ·å¼æå–åˆ°ç‹¬ç«‹æ–‡ä»¶ï¼š
```scss
// docs/.vuepress/styles/home.scss
.card-container {
  // ... é¦–é¡µæ ·å¼
}
```

2. åœ¨ `index.scss` ä¸­å¼•å…¥ï¼š
```scss
@import './home.scss';
```

3. åœ¨ `README.md` ä¸­ç§»é™¤å†…è”æ ·å¼ï¼Œä½¿ç”¨ç±»å

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 6. è„šæœ¬è·¨å¹³å°å…¼å®¹æ€§ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `scripts/core/mark-map.ts`

**é—®é¢˜**:
- ä½¿ç”¨ Unix shell å‘½ä»¤ï¼ˆ`rm -rf`, `mv -f`ï¼‰ï¼Œåœ¨ Windows ä¸Šå¯èƒ½ä¸å·¥ä½œ
- ä½¿ç”¨ `&&` è¿æ¥å‘½ä»¤ï¼Œè·¨å¹³å°å…¼å®¹æ€§å·®

**ä¿®å¤å»ºè®®**:
```typescript
import { VipNodeJS, VipExecutor } from '@142vip/utils'
import { readdir, unlink, mkdir } from 'fs/promises'
import { join, extname } from 'path'

async function markMapMain(): Promise<void> {
  // ä½¿ç”¨ Node.js API æ›¿ä»£ shell å‘½ä»¤
  const targetDir = VipNodeJS.pathJoin(__dirname, 'docs/.vuepress/public/mind-map')
  
  // æ¸…ç©ºç›®å½•
  try {
    const files = await readdir(targetDir)
    await Promise.all(files.map(file => unlink(join(targetDir, file))))
  } catch (error) {
    // å¤„ç†é”™è¯¯
  }
  
  // è½¬æ¢å’Œç§»åŠ¨æ–‡ä»¶
  const mdList = scanDirectory(markMapSourcePath, 'md')
  for (const md of mdList) {
    await VipExecutor.commandStandardExecutor([
      `npx markmap --no-open ${md}`
    ])
    // ç§»åŠ¨æ–‡ä»¶ä½¿ç”¨ Node.js API
  }
}
```

---

### 7. ç»„ä»¶ä»£ç ä¼˜åŒ–ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `docs/.vuepress/components/XMindManager.vue`

**é—®é¢˜**:
- ä½¿ç”¨ Options APIï¼Œå¯ä»¥æ”¹ä¸º Composition API æé«˜æ€§èƒ½
- ç¼ºå°‘é”™è¯¯å¤„ç†
- ç¡¬ç¼–ç çš„é»˜è®¤å€¼

**ä¿®å¤å»ºè®®**:
```vue
<script setup lang="ts">
import { ref, watch, onMounted } from 'vue'
import { XMindEmbedViewer } from 'xmind-embed-viewer'
import mapData from '../public/mind-map/index.json'

const viewer = ref<XMindEmbedViewer | null>(null)
const xmindIndex = ref(0)
const xmindFileList = ref(mapData.map(({ name }) => name))
const xmindFile = ref(mapData.length > 0 ? mapData[0].xMindPath : '../mark-map/æ“ä½œç³»ç»Ÿå‘å±•å†ç¨‹.xmind')

watch(xmindIndex, async (newIndex) => {
  try {
    const { xMindPath } = mapData[newIndex]
    const xmindResponse = await fetch(xMindPath)
    if (!xmindResponse.ok) throw new Error('Failed to fetch XMind file')
    
    const data = await xmindResponse.arrayBuffer()
    viewer.value?.setZoomScale(100)
    viewer.value?.load(data)
  } catch (error) {
    console.error('Error loading XMind file:', error)
  }
})

onMounted(async () => {
  try {
    const res = await fetch(xmindFile.value)
    if (!res.ok) throw new Error('Failed to fetch initial XMind file')
    
    viewer.value = new XMindEmbedViewer({
      el: '#x-mind-manager-container',
      file: await res.arrayBuffer(),
      region: 'cn',
      styles: {
        width: '100%',
        minHeight: '600px',
        height: 'auto',
        maxHeight: '1200px',
      },
    })
  } catch (error) {
    console.error('Error initializing XMind viewer:', error)
  }
})

async function handleOpenLocalBtnClick() {
  // ... å®ç°
}

async function handleZoomScaleRevertBtnClick() {
  viewer.value?.setFitMap()
}
</script>
```

---

## ğŸ”§ å¯ç»´æŠ¤æ€§ä¼˜åŒ–

### 8. é”™è¯¯å¤„ç†ç¼ºå¤±ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: å¤šä¸ªæ–‡ä»¶

**é—®é¢˜**:
- `mark-map.ts`: ç¼ºå°‘é”™è¯¯å¤„ç†
- `XMindManager.vue`: fetch æ“ä½œç¼ºå°‘é”™è¯¯å¤„ç†
- æ–‡ä»¶æ“ä½œç¼ºå°‘å¼‚å¸¸æ•è·

**ä¿®å¤å»ºè®®**:
```typescript
// åœ¨æ‰€æœ‰å¼‚æ­¥æ“ä½œå’Œæ–‡ä»¶æ“ä½œä¸­æ·»åŠ  try-catch
async function markMapMain(): Promise<void> {
  try {
    // ... æ“ä½œ
  } catch (error) {
    console.error('Mark map generation failed:', error)
    process.exit(1)
  }
}
```

---

### 9. ä»£ç é‡å¤ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: Sidebar é…ç½®æ–‡ä»¶

**é—®é¢˜**: æ‰€æœ‰ sidebar æ–‡ä»¶éƒ½æœ‰ç›¸ä¼¼çš„ç»“æ„

**ä¿®å¤å»ºè®®**:
åˆ›å»ºé€šç”¨çš„ sidebar é…ç½®å·¥å…·å‡½æ•°ï¼Œå‡å°‘é‡å¤ä»£ç ï¼ˆè§ç¬¬2ç‚¹ï¼‰

---

### 10. é…ç½®é›†ä¸­ç®¡ç†ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: å¤šä¸ªé…ç½®æ–‡ä»¶

**é—®é¢˜**: é…ç½®åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­

**ä¿®å¤å»ºè®®**:
åˆ›å»ºç»Ÿä¸€çš„é…ç½®ç®¡ç†æ–‡ä»¶ï¼š
```typescript
// docs/config/constants.ts
export const SIDEBAR_CONFIG = {
  defaultCollapsible: false,
  // å…¶ä»–é»˜è®¤é…ç½®
}
```

---

## ğŸ“¦ æ„å»ºå’Œè„šæœ¬ä¼˜åŒ–

### 11. æ„å»ºè„šæœ¬ä¼˜åŒ–ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `package.json`

**é—®é¢˜**:
- `dev` è„šæœ¬æ¯æ¬¡éƒ½ä¼šæ„å»º mark-mapï¼Œå¯èƒ½å½±å“å¼€å‘ä½“éªŒ

**ä¿®å¤å»ºè®®**:
```json
{
  "scripts": {
    "dev": "npx vuepress dev docs",
    "dev:with-map": "pnpm build:mark-map && pnpm dev",
    "build": "pnpm build:mark-map && npx vuepress build docs --clean-temp --clean-cache"
  }
}
```

---

### 12. ä¾èµ–ç®¡ç†ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
**ä½ç½®**: `package.json`

**é—®é¢˜**:
- æ‰€æœ‰ä¾èµ–éƒ½æ˜¯ `devDependencies`ï¼Œä½†ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦æŸäº›åŒ…

**å»ºè®®**: æ£€æŸ¥å¹¶æ­£ç¡®åˆ†ç±»ä¾èµ–

---

## ğŸ¯ ä¼˜å…ˆçº§æ€»ç»“

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³ä¿®å¤ï¼‰
1. âœ… æ–‡ä»¶å‘½åé”™è¯¯ï¼ˆ`1.åŸºæœ¬æ¦‚è¿°g.md`ï¼‰

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆè¿‘æœŸä¿®å¤ï¼‰
2. Sidebar é…ç½®ä¸ä¸€è‡´
3. TypeScript é…ç½®ä¸å¤Ÿä¸¥æ ¼
4. è„šæœ¬è·¨å¹³å°å…¼å®¹æ€§
5. é”™è¯¯å¤„ç†ç¼ºå¤±

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸä¼˜åŒ–ï¼‰
6. Sidebar ç±»å‹å®šä¹‰
7. æ ·å¼æ–‡ä»¶ç»„ç»‡
8. ç»„ä»¶ä»£ç ä¼˜åŒ–ï¼ˆComposition APIï¼‰
9. ä»£ç é‡å¤ä¼˜åŒ–
10. é…ç½®é›†ä¸­ç®¡ç†
11. æ„å»ºè„šæœ¬ä¼˜åŒ–
12. ä¾èµ–ç®¡ç†

---

## ğŸ“ å®æ–½å»ºè®®

1. **ç«‹å³ä¿®å¤**: æ–‡ä»¶å‘½åé”™è¯¯
2. **æœ¬å‘¨å®Œæˆ**: ç»Ÿä¸€ sidebar é…ç½®ï¼Œæ·»åŠ é”™è¯¯å¤„ç†
3. **æœ¬æœˆå®Œæˆ**: TypeScript ä¸¥æ ¼æ¨¡å¼ï¼Œè„šæœ¬è·¨å¹³å°ä¼˜åŒ–
4. **æŒç»­æ”¹è¿›**: ä»£ç é‡æ„ï¼Œæ€§èƒ½ä¼˜åŒ–

---

## ğŸ” é¢å¤–å»ºè®®

### ä»£ç è´¨é‡å·¥å…·
- æ·»åŠ  Prettier é…ç½®ç»Ÿä¸€ä»£ç æ ¼å¼
- è€ƒè™‘æ·»åŠ  Husky + lint-staged è¿›è¡Œæäº¤å‰æ£€æŸ¥
- æ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆå¦‚æœé€‚ç”¨ï¼‰

### æ–‡æ¡£æ”¹è¿›
- æ·»åŠ  CONTRIBUTING.md è¯´æ˜å¼€å‘è§„èŒƒ
- å®Œå–„ README.md çš„å¼€å‘å’Œéƒ¨ç½²è¯´æ˜

### æ€§èƒ½ç›‘æ§
- è€ƒè™‘æ·»åŠ æ„å»ºæ—¶é—´ç›‘æ§
- æ·»åŠ  bundle å¤§å°åˆ†æ

